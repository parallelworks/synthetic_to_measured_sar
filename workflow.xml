<tool id='alvaro_synthetic_to_measured_sar' name='alvaro_synthetic_to_measured_sar'>
  <command interpreter='bash'>parsl_wrapper.sh</command>
  <cancel interpreter='bash'>kill.sh</cancel>
  <inputs>
    <param name='pw_conda_yaml' label='PW Conda YAML Definition File' type='hidden' value='./requirements/parsl-1.2-python-3.6.13.yaml' width='50%_none'></param>
    <param name='pw_conda_dir' label='PW Conda Directory' type='hidden' value='/pw/.miniconda3c' width='50%_none'></param>
    <param name='pw_conda_env' label='PW Conda Environment Name' type='hidden' value='parsl-1.2-python-3.6.13' width='50%_none'></param>    
    <section name='data' type='section' title='Download Data' expanded='true'>
        <param name='repo_dir' label='Directory of the Data Repository' help='Data is downloaded from https://github.com/benjaminlewis-afrl/SAMPLE_dataset_public if not already present in the specified directory' type='text' value='/contrib/__PW_USER__/SAMPLE_Public_Dist_A' width='75%'>
    </param>    
    </section>
    <section name='mpi' type='section' title='MPI Data Processing' expanded='true'>
        <param name='np' label='MPI Processes' type='integer' min='2' max='128' help='Parameter passed to mpiexec -np []' value='4' width='25%'>
        </param>
        <param name='noise_amount' label='Noise Intensity' type='integer' min='1' max='255' help='Noise is added as a uniform random value between -Intensity and + Intensity. Resulting values are trimmed between 0 and 255' value='25' width='25%'>
        </param>
    </section>
    <section name='prepro' type='section' title='Data Processing' expanded='false'>
      <param name='rot_angles' label='Rotation Angles' type='text' help='Additional images are generated by rotating existing images' value='90' width='25%'>
      </param>
      <conditional name="tool_cond">
          <param name='tool' type='select' label='Select Processing Tool' help='' width='50%_none' multiple='false'>
            <option value="matlab" selected="true">Matlab</option>
            <option value="matlab_compiled" >Compiled Matlab</option>
            <option value="python">Python</option>
          </param>
          <when value="matlab">
            <param name='matlab_bin' label='Path to Matlab Binary' type='text' help='' value='/contrib/MATLAB/R2022b/bin/matlab' width='50%_none'>
            </param>
            <param name='matlab_server_port' label='Matlab Server Port' type='text' help='' value='27010' width='25%'>
            </param>
            <param name='matlab_daemon_port' label='Matlab Daemon Port' type='text' help='' value='1711' width='25%'>
            </param>
          </when>
          <when value="matlab_compiled">
            <param name='mcrroot' label='Path to Matlab Runtime Directory' type='text' help='' value='/contrib/MATLAB/MATLAB_Runtime/v912' width='50%_none'>
            </param>
          </when>
      </conditional>
    </section>
    <section name='cnn' type='section' title='PyTorch CNN' expanded='false'>
      <param name='REPEAT_ITERS' label='Number of Iterations:' type='integer' min='2' max='200' help='Model is trained multiple time to compute statistics' value='3' width='25%'>
      </param>
      <param name='K' label='K' type='text' help='Proportion of real data [0,1] where 0 is all synthetic and 1 is all real' value='0' width='25%'>
      </param>
      <param name='DSIZE' label='DSIZE' type='text' value='64' width='25%'>
      </param>
      <param name='num_epochs' label='Number of Epochs' type='text' value='10' width='25%'>
      </param>
      <param name='batch_size' label='Batch Size' type='text' value='128' width='25%'>
      </param>
      <param name='learning_rate_decay_schedule' label='Learning Rate Decay Schedule' type='text' value='61' help='To specify a list use --- as in 61---51' width='25%'>
      </param>
      <param name='learning_rate' label='Learning Rate' type='text' value='0.001' width='25%'>
      </param>
      <param name='gamma' label='Gamma' type='text' value='0.1' width='25%'>
      </param>
      <param name='weight_decay' label='Weight Decay' type='text' value='0.' width='25%'>
      </param>
      <param name='dropout' label='Dropout' type='text' value='0.4' width='25%'>
      </param>
      <param name='gaussian_std' label='Gaussian Std' type='text' value='0.4' width='25%'>
      </param>
      <param name='uniform_range' label='Uniform Range' type='text' value='0.' width='25%'>
      </param>
      <param name='simClutter' label='SimClutter' type='text' value='0.' width='25%'>
      </param>
      <param name='flipProb' label='Flip Prob' type='text' value='0.' width='25%'>
      </param>
      <param name='degrees' label='Degrees' type='text' value='0' width='25%'>
      </param>
      <param name='LBLSMOOTHING_PARAM' label='LBL Smoothing Parameter' type='text' value='0.1' width='25%'>
      </param>
      <param name='MIXUP_ALPHA' label='Mixup Alpha' type='text' value='0.1' width='25%'>
      </param>
    </section>
    <section name='pwrl_exec' type='section' title='Executor' expanded='true'>
      <param name='resource' type='computeResource' label='Service host' hideUserWorkspace='true' help='Resource to host the service'></param>
      <param name='nports' label='Number of Ports to Reserve' type='hidden' value='2' width='50%_none'></param>
      <param name='cores_per_worker' label='Cores per Worker' type='integer' min="1" max="100" help='cores_per_worker parameter for the Parsl HighThroughputExecutor' value='1' width='50%_none'>
      </param>
      <param name='worker_conda_yaml' label='Worker Conda YAML Definition File' type='hidden' value='./requirements/sar-atr-cpu-parsl.yaml' width='50%_none'></param>
      <param name='worker_conda_dir' label='Worker Conda Directory' type='hidden' value='/contrib/miniconda' width='50%_none'></param>
      <param name='worker_conda_env' label='Worker Conda Environment Name' type='hidden' value='sar-atr-cpu-parsl' width='50%_none'></param>
      <param name='jobschedulertype' label='Select Controller, SLURM Partition or PBS Queue' type='hidden' value='SLURM' width='50%_none'></param>
      <param name='_parsl_provider_partition' label='SLURM Partition' type='text' help='partition parameter for the Parsl SlurmProvider' value='' width='50%_none'></param>
      <param name='_parsl_provider_nodes_per_block' label='Nodes per Block' type='integer' min="1" max="10" help='nodes_per_block parameter for the Parsl SlurmProvider' value='1' width='50%_none'></param>
      <param name='_parsl_provider_walltime' label='Walltime' type='text' help='walltime parameter for the Parsl SlurmProvider' value='01:00:00' width='50%_none'></param>
      <param name='_parsl_provider_max_blocks' label='Max Blocks' type='integer' min="1" max="10" help='max_blocks parameter for the Parsl SlurmProvider' value='1' width='50%_none'></param>
    </section>
  </inputs>
  <outputs>
  </outputs>
</tool>
